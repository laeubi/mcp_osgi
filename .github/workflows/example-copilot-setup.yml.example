# Example workflow for setting up MCP OSGi Server with GitHub Copilot Coding Agent
# 
# Copy this file to your repository as .github/workflows/setup-copilot-mcp.yml
# and customize as needed.
#
# This workflow uses the reusable workflow from laeubi/mcp_osgi to build the MCP server
# and make it available for the GitHub Copilot Coding Agent.

name: Setup Copilot MCP Server

on:
  workflow_dispatch:  # Manual trigger via GitHub UI
  push:
    branches: [ main ]  # Or specify your default branch

jobs:
  build-mcp-server:
    name: Build and Setup MCP OSGi Server
    uses: laeubi/mcp_osgi/.github/workflows/build-mcp-server.yml@main
    
  # Optional: Additional steps to configure or deploy the MCP server
  configure:
    name: Configure MCP Server
    needs: build-mcp-server
    runs-on: ubuntu-latest
    steps:
      - name: Download MCP server JAR
        uses: actions/download-artifact@v4
        with:
          name: mcp-osgi-server
          path: ./mcp-server
          
      - name: Display JAR location
        run: |
          echo "MCP Server JAR downloaded to:"
          ls -lh ./mcp-server/
          echo ""
          echo "JAR path: ${{ needs.build-mcp-server.outputs.jar-path }}"
